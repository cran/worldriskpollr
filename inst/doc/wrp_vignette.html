<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>wrp_vignette</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">wrp_vignette</h1>



<div id="installation" class="section level1">
<h1>Installation</h1>
<p>The CRAN release version of <code>worldriskpollr</code> can be
installed via:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;worldriskpollr&quot;</span>)</span></code></pre></div>
<p>You can install the development version from <a href="https://github.com/githubIEP/worldriskpollr/">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;devtools&quot;)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github(&quot;githubIEP/worldriskpollr&quot;)</span></span></code></pre></div>
<p>Once installed you can load the library using:</p>
</div>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>The World Risk Poll is the first ever global study of worry and risk
across the world. The poll was conducted by Gallup as part of its World
Poll, and is based on interviews with over 150,000 people, including
those living in places where little or no official data exists, yet
where reported risks are often high.</p>
<p>The World Risk Polls covers the biggest risks faced globally
including new findings on subjects such as risks faced by women, safety
of food, experience of serious injury and violence and harassment in the
workplace, climate change, and online safety.</p>
<p>The poll will enable businesses, regulators, governments and
academics to work with communities to develop policies and actions that
save lives and make people feel safer. This landmark piece of research
will be undertaken at least four times over eight years and the weight
of knowledge accumulated will contribute in a more significant way than
any past research, to making the world a safer place.</p>
<p>The poll reveals new insights – for example demonstrating that
demographic factors are generally a better predictor of risk perception
than experience; and new findings that tell us how across the world,
different groups of people experience risk in very different ways.</p>
<p>The poll highlights discrepancies between people’s perception of risk
and the actual likelihood of them experiencing those dangers. For the
first time, we learn how safe people feel; how they perceive risk and
what risks they experience everyday.</p>
<p>You can access more details and findings related to the World Risk
poll <a href="https://wrp.lrfoundation.org.uk/">here</a>.</p>
<div id="institute-for-economics-and-peace" class="section level2">
<h2>Institute for Economics and Peace</h2>
<p>Lloyd’s Register teamed up with the Institute for Economics and Peace
(IEP) to explore the complex relationship between peace and people’s
perceptions of risk and their safety and security. You can see our
latest findings in the annual release of the Global Peace Index In June.
Further information about IEP can be found <a href="https://www.visionofhumanity.org/">here</a>).</p>
<p>IEP created this package to provide you with easy, programmatic
access to the World Risk Poll. We are responsible for maintaining it. We
encourage you to reach out to us directly if you have any questions
about the package or our broader work measuring trends in peace and
security.</p>
</div>
<div id="country-coverage" class="section level2">
<h2>Country coverage</h2>
<p>The World Risk Poll surveyed people in 150 countries in total,
including countries with very low levels of peace where little or no
official data exists, yet where reported risks are often high.</p>
</div>
</div>
<div id="getting-started" class="section level1">
<h1>Getting started</h1>
<p>The <code>worldriskpollr</code> package is designed to give you quick
and easy access to all data collected through the World Risk Poll.
<code>worldriskpollr</code> provides you with an interactive package to
interact and access aggregated survey data.</p>
<p>Using the following functions, it will download and process the World
Risk Poll data into your package cache memory, then extract questions of
interest.</p>
<div id="search-the-world-risk-poll-with-wrp_search" class="section level2">
<h2>Search the World Risk Poll with <code>wrp_search</code></h2>
<p>To search for a question if interest, <code>worldriskpollr</code>
provides <code>wrp_search</code> for users to enter a search term. If
the search term is a match, <code>wrp_search</code> will return a data
frame with the following columns.</p>
<ul>
<li><p><code>wrp_question_uid</code>: The unique identifier for the
question, needed to use the function <code>wrp_get</code>.</p></li>
<li><p><code>question</code>: The question in full.</p></li>
<li><p><code>responses</code>: The responses given in the poll.</p></li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">wrp_search</span>(<span class="st">&quot;violence&quot;</span>))</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 3</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   wrp_question_uid question                                              respo…¹</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;            &lt;chr&gt;                                                 &lt;chr&gt;  </span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 VH1              Ever Experienced Physical Violence/Harassment at Wor… Yes    </span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 VH1              Ever Experienced Physical Violence/Harassment at Wor… No     </span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 VH1              Ever Experienced Physical Violence/Harassment at Wor… (Respo…</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 VH1              Ever Experienced Physical Violence/Harassment at Wor… (DK)   </span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 VH1              Ever Experienced Physical Violence/Harassment at Wor… (Refus…</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 VH1B             How Many Times You Experienced Physical Violence/Har… Once o…</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with abbreviated variable name ¹​responses</span></span></code></pre></div>
</div>
<div id="getting-aggregated-world-risk-poll-data-using-wrp_get" class="section level2">
<h2>Getting aggregated World Risk Poll data using
<code>wrp_get</code></h2>
<p>The <code>wrp_get</code> function provides users with a way of access
aggregated data. Users can select which geographic region they would
like to see the data at:</p>
<ul>
<li><p><code>country</code>: data is aggregated to the national
level;</p></li>
<li><p><code>region</code>: data is aggregated to the national
level;</p></li>
<li><p><code>income</code>: data is aggregated based on World Bank
Income classification of the country.</p></li>
</ul>
<p>The user also needs to select the desired disaggregation:</p>
<ul>
<li><code>0: No disaggregation</code>: aggregates to the selected
geography;</li>
<li><code>1: Age group</code>: respondent’s age group;</li>
<li><code>2: Sex</code>: respondent’s sex;</li>
<li><code>3: Education</code>: respondent’s highest level of
education;</li>
<li><code>4: Income Feelings</code>: respondent’s feelings about their
household income;</li>
<li><code>5: Income Quintiles</code>: respondent’s per capita income
quintile;</li>
<li><code>6: Employment</code>: respondent’s employment Status</li>
<li><code>7: Residence</code>: respondent’s residence: urban or
rural;</li>
<li><code>8: Household Size</code>: total number of people in the
respondent’s household;</li>
<li><code>9: Children in Household</code>: total number of children
under 15 in the respondent’s household.</li>
</ul>
<p>Users need to provide the desired aggregation level to
<code>wrp_get</code> as a string. It is also necessary to provide a
question code string, such as those provided returned in
<code>wrp_search</code>. The use of <code>wrp_get</code> looks like:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">wrp_get</span>(<span class="at">geography =</span> <span class="st">&quot;country&quot;</span>, <span class="at">wrp_question_uid =</span> <span class="st">&quot;Q1&quot;</span>, <span class="at">disaggregation =</span> <span class="dv">0</span>))</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 7</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   geography     disaggregation group          year question      respo…¹ perce…²</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;     &lt;dbl&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 United States Aggregate      United States  2019 Feel More, L… More s…  17.9  </span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 United States Aggregate      United States  2019 Feel More, L… Less s…  26.7  </span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 United States Aggregate      United States  2019 Feel More, L… About …  55.2  </span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 United States Aggregate      United States  2019 Feel More, L… (DK)      0.123</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 United States Aggregate      United States  2019 Feel More, L… (Refus…   0.115</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 United States Aggregate      United States  2021 Feel More, L… More s…  16.1  </span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with abbreviated variable names ¹​response, ²​percentage</span></span></code></pre></div>
<p>This returns a 6 column dataframe in tidy format with the following
columns:</p>
<ul>
<li><p><code>geography</code>: Lists the geography selected.</p></li>
<li><p><code>disaggregation</code>: The disaggregation used in the data
results.</p></li>
<li><p><code>group</code>: the type of disaggregation</p></li>
<li><p><code>year</code>: year of results</p></li>
<li><p><code>question</code>: the question in full</p></li>
<li><p><code>response</code>: the response</p></li>
<li><p><code>percentage</code>: the percentage of respondents for each
disaggregation that provided the relevant response.</p></li>
</ul>
<p>To explore global trends, the user could use:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">wrp_get</span>(<span class="at">geography =</span> <span class="st">&quot;world&quot;</span>, <span class="at">wrp_question_uid =</span> <span class="st">&quot;Q1&quot;</span>, <span class="at">disaggregation =</span> <span class="dv">0</span>))</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 7</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   geography disaggregation group  year question                  respo…¹ perce…²</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;     &lt;chr&gt;          &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;                     &lt;chr&gt;     &lt;dbl&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 World     Aggregate      World  2019 Feel More, Less or About… More s…  36.4  </span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 World     Aggregate      World  2019 Feel More, Less or About… Less s…  24.9  </span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 World     Aggregate      World  2019 Feel More, Less or About… About …  36.1  </span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 World     Aggregate      World  2019 Feel More, Less or About… (DK)      2.44 </span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 World     Aggregate      World  2019 Feel More, Less or About… (Refus…   0.148</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 World     Aggregate      World  2021 Feel More, Less or About… More s…  27.3  </span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with abbreviated variable names ¹​response, ²​percentage</span></span></code></pre></div>
</div>
</div>
<div id="standard-use-case" class="section level1">
<h1>Standard Use Case</h1>
<p>So a standard use case stringing <code>wrp_search</code> and
<code>wrp_get</code> together could look like:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Search for a topic</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">wrp_search</span>(<span class="st">&quot;violence&quot;</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Pick the question of interest</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> tmp[tmp<span class="sc">$</span>question <span class="sc">==</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Ever Experienced Physical Violence/Harassment at Work (all countries)&quot;</span>, ]</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the question code</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">unique</span>(tmp<span class="sc">$</span>wrp_question_uid)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># get the data</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">wrp_get</span>(<span class="at">geography =</span> <span class="st">&quot;country&quot;</span>, <span class="at">wrp_question_uid =</span> tmp, <span class="at">disaggregation =</span> <span class="dv">0</span>))</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 7</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   geography     disaggregation group          year question      respo…¹ perce…²</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;     &lt;dbl&gt;</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 United States Aggregate      United States  2021 Ever Experie… Yes      11.8  </span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 United States Aggregate      United States  2021 Ever Experie… No       88.2  </span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 Egypt         Aggregate      Egypt          2021 Ever Experie… Yes       2.12 </span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 4 Egypt         Aggregate      Egypt          2021 Ever Experie… No       63.8  </span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 5 Egypt         Aggregate      Egypt          2021 Ever Experie… (Respo…  33.9  </span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 6 Egypt         Aggregate      Egypt          2021 Ever Experie… (Refus…   0.247</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with abbreviated variable names ¹​response, ²​percentage</span></span></code></pre></div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
